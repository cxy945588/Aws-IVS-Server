# ==========================================
# AWS IVS Real-time 環境變數配置
# ==========================================

# ==========================================
# AWS 配置
# ==========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_ACCOUNT_ID=123456789012

# ==========================================
# IVS Stage 配置
# ==========================================
# 主播專用 Stage ARN (必須先在 AWS Console 創建)
MASTER_STAGE_ARN=arn:aws:ivs:us-east-1:123456789012:stage/xxxxxxxxxxxxx

# Stage 名稱前綴 (用於自動創建觀眾 Stage)
STAGE_NAME_PREFIX=production-stage-

# ==========================================
# API Server 配置
# ==========================================
NODE_ENV=development
API_PORT=3000
API_HOST=0.0.0.0

# API 安全金鑰 (用於驗證請求)
# 生成方式: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
API_SECRET_KEY=your_random_secret_key_min_32_chars_long

# JWT 配置
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=24h

# CORS 允許的來源
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ==========================================
# Media Server 配置
# ==========================================
# 是否啟用 Media Server 整合
ENABLE_MEDIA_SERVER=true

# Media Server URL (API Server 連接用)
MEDIA_SERVER_URL=http://localhost:3001

# Media Server 認證密鑰 (用於 API Server <-> Media Server 通信)
# 生成方式: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MEDIA_SERVER_SECRET=your_media_server_secret_key_here

# Media Server 實例配置
MEDIA_SERVER_ID=media-server-01
MEDIA_SERVER_PORT=3001
MEDIA_SERVER_WS_PORT=8080

# API Server URL (Media Server 連接用)
API_SERVER_URL=http://localhost:3000

# 自動擴展配置
AUTO_SCALE_ENABLED=true
MAX_VIEWERS_PER_STAGE=50
SCALE_UP_THRESHOLD=45
SCALE_DOWN_THRESHOLD=5

# ==========================================
# DynamoDB 配置
# ==========================================
DYNAMODB_TABLE_PREFIX=ivs-production
DYNAMODB_USERS_TABLE=ivs-production-users
DYNAMODB_STAGES_TABLE=ivs-production-stages
DYNAMODB_SESSIONS_TABLE=ivs-production-sessions
DYNAMODB_TOKENS_TABLE=ivs-production-tokens

# ==========================================
# Redis (ElastiCache) 配置
# ==========================================
REDIS_HOST=your-redis-cluster.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS_ENABLED=true
REDIS_DB=0

# Redis 鍵前綴
REDIS_KEY_PREFIX=ivs:prod:

# ==========================================
# S3 配置
# ==========================================
S3_BUCKET_NAME=your-ivs-frontend-bucket
S3_REGION=us-east-1

# CloudFront 分發 ID (用於清除快取)
CLOUDFRONT_DISTRIBUTION_ID=EXXXXXXXXXXXXX

# ==========================================
# CloudWatch 配置
# ==========================================
CLOUDWATCH_NAMESPACE=IVS/Production
CLOUDWATCH_LOG_GROUP=/aws/ivs/production
CLOUDWATCH_LOG_STREAM_PREFIX=api-server

# 是否啟用詳細日誌
ENABLE_DETAILED_LOGGING=true

# ==========================================
# SNS 告警配置
# ==========================================
SNS_ALERT_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:ivs-production-alerts

# 告警閾值
ALERT_HIGH_VIEWER_COUNT=800
ALERT_HIGH_CPU_PERCENT=80
ALERT_HIGH_MEMORY_PERCENT=80
ALERT_HIGH_DAILY_COST=500

# ==========================================
# 前端配置 (Next.js)
# ==========================================
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_WS_URL=ws://localhost:8080
NEXT_PUBLIC_ENV=development

# IVS Web Broadcast SDK 版本
NEXT_PUBLIC_IVS_SDK_VERSION=1.28.0

# ==========================================
# 監控與日誌配置
# ==========================================
# 日誌等級: debug, info, warn, error
LOG_LEVEL=info

# 是否啟用監控
ENABLE_MONITORING=true

# Metrics 收集間隔 (秒)
METRICS_INTERVAL=60

# ==========================================
# 成本控制配置
# ==========================================
# 每日成本上限 (USD)
DAILY_COST_LIMIT=1000

# 每小時成本上限 (USD)
HOURLY_COST_LIMIT=50

# 是否啟用成本告警
ENABLE_COST_ALERTS=true

# ==========================================
# 開發環境配置 (僅開發使用)
# ==========================================
# 是否啟用 Mock 模式 (不連接真實 AWS)
ENABLE_MOCK_MODE=false

# 是否啟用熱重載
ENABLE_HOT_RELOAD=true

# 是否啟用 Debug 模式
DEBUG=ivs:*

# ==========================================
# 安全配置
# ==========================================
# Token 有效期
PUBLISHER_TOKEN_DURATION=14400  # 4 小時 (秒)
VIEWER_TOKEN_DURATION=3600      # 1 小時 (秒)

# API Rate Limiting
RATE_LIMIT_WINDOW_MS=60000      # 1 分鐘
RATE_LIMIT_MAX_REQUESTS=100     # 每分鐘最多 100 請求

# ==========================================
# 效能優化配置
# ==========================================
# API Server Worker 數量 (建議使用 CPU 核心數)
API_WORKERS=2

# 連接池大小
DB_POOL_SIZE=10
REDIS_POOL_SIZE=10

# 請求超時 (毫秒)
REQUEST_TIMEOUT=30000

# ==========================================
# 功能開關
# ==========================================
# 是否啟用聊天室功能
ENABLE_CHAT=true

# 是否啟用錄影功能
ENABLE_RECORDING=false

# 是否啟用統計分析
ENABLE_ANALYTICS=true

# 是否啟用自動擴展
ENABLE_AUTO_SCALING=true
